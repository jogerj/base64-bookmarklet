function getSelectionText(){var a="",b=document.activeElement,c=b?b.tagName.toLowerCase():null;return"textarea"==c||"input"==c&&/^(?:text|search|password|tel|url)$/i.test(b.type)&&"number"==typeof b.selectionStart?a=b.value.slice(b.selectionStart,b.selectionEnd):window.getSelection&&(a=window.getSelection().toString()),a}function encode(a){return window.btoa(encodeURIComponent(a).replace(/%([0-9A-F]{2})/g,function(a,b){return String.fromCharCode("0x"+b)}))}function decode(a){return a=a.replaceAll("=","").replaceAll(/\s+/g,""),decodeURIComponent(window.atob(a))}function hash(a,b){return a?encode(b):decode(b)}try{var text=getSelectionText(),choice=window.confirm("Press OK to encode to base64.\nPress CANCEL to decode from base64");do text=hash(choice,text);while(window.prompt("Press CTRL-C to copy\nPress ESC/Click CANCEL to close\nPress ENTER/Click OK to "+(choice?"encode":"decode")+" again",text))}catch(a){choice?window.alert(a):window.alert("Failed to decode! Not a valid Base64!\n")}